{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user within the FlowIDQ application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "displayName": {
          "type": "string",
          "description": "User's display name."
        },
        "phoneNumber": {
          "type": "string",
          "description": "User's phone number."
        },
        "profileImageUrl": {
          "type": "string",
          "description": "URL of the user's profile image.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "email"
      ]
    },
    "Document": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Document",
      "type": "object",
      "description": "Represents a user uploaded document in the FlowIDQ application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the document."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Document)"
        },
        "title": {
          "type": "string",
          "description": "Title of the document."
        },
        "description": {
          "type": "string",
          "description": "Description of the document."
        },
        "uploadDate": {
          "type": "string",
          "description": "The date and time when the document was uploaded.",
          "format": "date-time"
        },
        "fileUrl": {
          "type": "string",
          "description": "URL where the document file is stored.",
          "format": "uri"
        },
        "isVerified": {
          "type": "boolean",
          "description": "Flag indicating if the document has been verified by the Document AI."
        },
        "isApproved": {
          "type": "boolean",
          "description": "Flag indicating if the document has been approved by an admin for sharing."
        }
      },
      "required": [
        "id",
        "userId",
        "title",
        "uploadDate",
        "fileUrl"
      ]
    },
    "Queue": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Queue",
      "type": "object",
      "description": "Represents a queue in the smart queue system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the queue."
        },
        "locationName": {
          "type": "string",
          "description": "Name of the location where the queue is."
        },
        "description": {
          "type": "string",
          "description": "Description of the queue."
        },
        "currentNumber": {
          "type": "number",
          "description": "The current number being served in the queue."
        },
        "totalEntries": {
            "type": "number",
            "description": "The total number of entries in the queue."
        }
      },
      "required": [
        "id",
        "locationName",
        "currentNumber"
      ]
    },
    "QueueEntry": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "QueueEntry",
      "type": "object",
      "description": "Represents an entry in a queue.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the queue entry."
        },
        "queueId": {
          "type": "string",
          "description": "Reference to Queue. (Relationship: Queue 1:N QueueEntry)"
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N QueueEntry)"
        },
        "entryNumber": {
          "type": "number",
          "description": "The number assigned to this entry in the queue (token number)."
        },
        "entryTime": {
          "type": "string",
          "description": "The date and time when the user joined the queue.",
          "format": "date-time"
        },
        "estimatedWaitTime": {
            "type": "number",
            "description": "Estimated wait time in minutes."
        }
      },
      "required": [
        "id",
        "queueId",
        "userId",
        "entryNumber",
        "entryTime"
      ]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles. Access is restricted to the user themselves."
        }
      },
      {
        "path": "/users/{userId}/documents/{documentId}",
        "definition": {
          "entityName": "Document",
          "schema": {
            "$ref": "#/backend/entities/Document"
          },
          "description": "Stores documents owned by a specific user. This path leverages hierarchical ownership, providing secure and efficient access control based on the user ID."
        }
      },
      {
        "path": "/queues/{queueId}",
        "definition": {
          "entityName": "Queue",
          "schema": {
            "$ref": "#/backend/entities/Queue"
          },
          "description": "Stores information about each queue. Open access for reading, but restricted creation and modification."
        }
      },
      {
        "path": "/queues/{queueId}/queueEntries/{queueEntryId}",
        "definition": {
          "entityName": "QueueEntry",
          "schema": {
            "$ref": "#/backend/entities/QueueEntry"
          },
          "description": "Stores entries for each queue. Includes denormalized userId for authorization independence. Ensures only the user can manage their queue entries."
        }
      }
    ]
  }
}